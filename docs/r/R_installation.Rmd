---
title: "Установка R+Rstudio под windows и macos"
author: "Борис Демешев"
date: "22 мая 2018"
output: html_document
lang: ru-RU
---

# Пошаговая установка R

1. Шаг только для windows. Если Windows только-только поставлена, то, пожалуйста, создайте пользователя с логином английскими буквами и работайте из под него.

Например, имя пользователя "Mashenka" подходит, а "Машенька" не подходит. Английское имя сильно облегчит жизнь в дальнейшем :) Проблема в том, что при взаимодействии Rstudio - R могут возникать проблемы, если в названии папки есть русские буквы, а у "Машеньки" путь к документам выглядит как "C:/Users/Машенька/".

Если компьютер давно используется с логином русскими буквами ("Машенька"), то оставляйте как есть, но:

    При установке внимательно следите, что все программы ставятся в папки не содержащие русских букв. Мы рекомендуем поставить R в папку `C:/R`, а Rstudio в папку `C:/Rstudio`.

2. На время установки отключите антивирус.

Нет, мы не хотим подсунуть слушателям хитрый троянский вирус :) Просто встречались с проблемами при установке, если антивирус включён.

3. Установите классический R для [windows](https://cran.r-project.org/bin/windows/base/) или для [macos](https://cran.r-project.org/bin/macosx/).

Тем, кто уже знаком с R и **не боится повозиться самостоятельно**, мы советуем попробовать вместо классического R поставить MRO, [Microsoft R Open](https://mran.microsoft.com/open/). Это другой дистрибутив R, оптимизированный под работу с 64-битными процессорами. Всё полностью идентично, кроме двух нюансов: во-первых, MRO немного быстрее, во-вторых, MRO ставит все пакеты на единую дату, выбираемую пользователем, а классический R ставит самые свежие версии пакетов.

4. Установите [RStudio](https://www.rstudio.com/products/rstudio/download/#download).

Rstudio — это всего лишь удобная красивая графическая оболочка к R. Суровые брутальные программисты могут вполне обойтись и без Rstudio :) Не спутайте Rstudio с R-studio, платной программой для восстановления данных.

5. Настройте Rstudio.

Запустите RStudio. Зайдите в раздел Tools --- Global options.

В разделе General:

    * уберите галочку у Restore .Rdata into workspace in startup.
    * выберите `Never` у Save workspace to .Rdata on exit

![](options_general.png)

В разделе Sweave:

    * "Weave .Rnw files using" выберите knitr.
![](options_sweave.png)

В разделе Code - Diagnostics:

    * выставьте все галочки.

![](options_diagnostics.png)

6. Установите все необходимые для курса пакеты R.

Скачайте файл [install_all.R](https://github.com/bdemeshev/coursera_metrics/raw/master/install_all.R). Откройте его в RStudio (`File` --- `Open file`). Запустите, выбрав `Code` --- `Source with Echo`. При этом требуется соединение с Интернетом. Бегущие красные надписи не означают ошибок, признаком ошибки является только явное сообщение Error.

7. Не забудьте включить обратно антивирус :)


# Если имя пользователя windows набрано русскими буквами, а создавать нового никак не хочется!

1.1. Создайте папку для установки пакетов без русских букв и пробелов, например, `C:/Rlib`.

1.2. Выполните в консоли Rstudio команду
```{r, eval=FALSE}
system("setx R_LIBS C:/Rlib")
```
<!--
2.2. Запустите командную строку Windows. Для этого можно нажать кнопку "Пуск", кликнуть "Выполнить", набрать "cmd" и нажать "ok".

2.3. В командной строке выполните
```{bash, eval=FALSE}
setx R_LIBS C:/Rlib
```
-->

Вместо `C:/Rlib` должно быть имя папки созданной на шаге 2.1.

1.3. Проверьте, что R знает, куда ему ставить пакеты. Для этого выполните в консоли Rstudio команду

```{r, eval=FALSE}
.libPaths()
```

Она должна указать путь к папке `C:/Rlib`. После этого все пакеты будут ставиться в папку `C:/Rlib`.

<!--
1. В Tools - Global options - Packages:

    * уберите галочку с "Use secure download method for HTTP"
-->
